angular.module('EmployeeDirectory').service("dataService", function(){

    var employees = [
        {name:"Thomas Jackson", street:"1234 My Street", city:"Orlando", state:"FL", zip:"12345"},
        {name:"John Doe", street:"1234 My Street", city:"Orlando", state:"FL", zip:"12345"},
        {name:"Jane Doe", street:"1234 My Street", city:"Orlando", state:"FL", zip:"12345"},
        {name:"Donald Duck", street:"1234 My Street", city:"Orlando", state:"FL", zip:"12345"},
        {name:"Mickey Mouse", street:"1234 My Street", city:"Orlando", state:"FL", zip:"12345"},
        {name:"Ruth Fertel", street:"1234 My Street", city:"Orlando", state:"FL", zip:"12345"}
    ];

    this.getDirectory = function(){
        var str = localStorage.getItem("LocEmployees");
        employees = JSON.parse(str) || employees;
        return employees;
    };

    this.hireEmployee = function(name,street,city,state,zip){
        console.log(name);
        console.log(street);
        console.log(city);
        console.log(state);
        console.log(zip);


        if (name === null){
            alert("Please Enter a Name");
            return;
        } else if (street === null){
            alert("Please Enter a Street");
            return;
        } else if (city === null){
            alert("Please Enter a City");
            return;
        } else if (state === null){
            alert("Please Enter a State");
            return;
        } else if (zip === null){
            alert("Please Enter a Zip");
            return;
        } else {
            employees.push({name: name, street: street, city: city, state: state, zip: zip});
            var str = JSON.stringify(employees);
            localStorage.setItem("LocEmployees", str);
            this.name = null;
            this.street = null;
            this.city = null;
            this.state = null;
            this.zip = null;
        }


    };
    this.termEmployee = function(employee){
        console.log(employee);
        var index = employees.indexOf(employee);
        console.log(index);
        console.log(employees);
        employees.splice(index,1);
        var str = JSON.stringify(employees);
        localStorage.setItem("LocEmployees", str);
        console.log(employees);
    };

    var expenses = [
        {description: "Flight to LA", amount: "499.95", date: "04/29/2015", category: "Travel", cleared: false},
        {description: "Brunch", amount: "19.95", date: "04/29/2015", category: "Food", cleared: false},
        {description: "Drinks", amount: "65.88", date: "04/29/2015", category: "Drinks", cleared: false},
        {description: "Dinner", amount: "87.99", date: "04/29/2015", category: "Food", cleared: false}
    ];

    this.getExpenses = function(){
        var str1 = localStorage.getItem("LocExpenses");
        expenses = JSON.parse(str1) || expenses;
        return expenses;
    };
    this.submitExpense = function(description, amount){
        console.log(description);
        console.log(amount);


        if (description === null){
            alert("Please Enter a Description");
            return;
        } else if (amount === null){
            alert("Please Enter an Amount");
            return;
        }  else {
            expenses.push({description: description, amount: amount});
            var str1 = JSON.stringify(expenses);
            localStorage.setItem("LocExpenses", str1);
            this.description = null;
            this.amount = null;
        }


    };
    this.cancelExpense = function(expense){
        console.log(expense);
        var index = expenses.indexOf(expense);
        console.log(index);
        console.log(expenses);
        expenses.splice(index,1);
        var str1 = JSON.stringify(expenses);
        localStorage.setItem("LocExpenses", str1);
        console.log(expenses);
    };

    this.updateExpense = function(type, cleared, date, index) {
        console.log(type);
        console.log(cleared);
        console.log(date);
        console.log(index);


        if (type === null) {
            alert("Please Enter a Type of Expense");
            return;
        } else if (date === null) {
            alert("Please Enter a Date");
            return;
        } else {
            expenses[index].date = date;
            expenses[index].cleared = cleared;
            expenses[index].category = type;
            var str2 = JSON.stringify(expenses);
            localStorage.setItem("LocExpenses", str2);

        }

    }

});
